{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page) {\n\n    const API_KEY = \"50815044-d1b29e7254804b3149c32accf\";\n    const BASE_URL = \"https://pixabay.com/api/\";\n    const PER_PAGE = 15;\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page:PER_PAGE,\n    });\n    return await axios(`${BASE_URL}?${params}`)\n        .then(res => \n            res.data)\n        .catch(error => {\n            console.log(error);\n    })\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMore = document.querySelector(\".load-more\");\n\nexport function createGallery(images) {\n    return images.map(image =>\n        ` <li class=\"gallery-item\">\n        <a class=\"image-item\" href = \"${image.largeImageURL}\">\n        <img src = \"${image.webformatURL}\" alt = \"${image.tags}\" />\n        <ul class =\"description\">\n        <li>\n        <p><b>Likes</b> ${image.likes}</p>\n        </li>\n        <li> \n        <p> <b>Views</b> ${image.views}</p>\n        </li>\n        <li>\n         <p> <b>Comments</b> ${image.comments}</p>\n        </li>\n        <li>\n         <p> <b>Downloads</b> ${image.downloads}</p>\n        </li>\n        </ul>\n        </a>\n    </li>\n`).join('');\n};\n\nexport function showLoadMore() {\n    loadMore.classList.remove(\"hidden\");\n    loadMore.disabled = false;\n    loadMore.textContent = \"Load more\";\n}\nexport function hideLoadMore() {\n loadMore.classList.add(\"hidden\")   \n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n    createGallery,\n    clearGallery,\n    hideLoader,\n    showLoader,\n    showLoadMore,\n    hideLoadMore\n} from './js/render-functions';\n\n\nconst lightBox = new SimpleLightbox(\".image-item\", {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nconst form = document.querySelector(\".form\");\nconst inputField = document.querySelector(\".input-field\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMore = document.querySelector(\".load-more\");\n\nlet currentPage = 1;\nlet totalHits = 0;\nlet loadedHits = 0;\nlet myPicture = '';\n\nform.addEventListener(\"submit\", handleSubmit)\nloadMore.addEventListener(\"click\", handleClick)\n\n\n\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    clearGallery();\n    showLoader();\n    myPicture = inputField.value.trim();\n    currentPage = 1;\n    loadedHits = 0;\n    if (myPicture === '') {\n        iziToast.warning({\n      message: 'Please enter a search query.',\n      position: 'topRight',\n        });\n        hideLoader();\n    return;\n    }\n    hideLoadMore();\n    try {\n        const response = await getImagesByQuery(myPicture, currentPage);\n        totalHits = response.totalHits;\n        hideLoader();\n        if (response.hits.length === 0) {\n            return iziToast.info({\n                title: 'Error',\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        }\n        const markup = createGallery(response.hits);\n        \n        gallery.insertAdjacentHTML('beforeend', markup);\n        lightBox.refresh();\n        loadedHits += response.hits.length;\n        if (loadedHits < totalHits) {\n            showLoadMore();\n        } else {\n            hideLoadMore();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n    } catch (error) {\n            iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n            console.log(error)\n    } finally {\n        hideLoader();\n        inputField.value = '';\n    }\n};\n\n\n\nasync function handleClick(event) {\n    hideLoadMore();\n    showLoader();\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    try {\n        currentPage += 1;\n        const response = await getImagesByQuery(myPicture, currentPage);\n        const markup = createGallery(response.hits);\n        gallery.insertAdjacentHTML('beforeend', markup);\n        lightBox.refresh();\n        loadedHits += response.hits.length;\n        if (loadedHits >= totalHits) {\n            hideLoadMore();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            showLoadMore();\n        }\n        const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    } catch (error) {\n            iziToast.error({\n      message: 'Failed to load more images.',\n      position: 'topRight',\n    });\n        console.log(error);\n    } finally {\n        hideLoader();\n        }\n};\n"],"names":["getImagesByQuery","query","page","API_KEY","BASE_URL","params","axios","res","error","loader","gallery","loadMore","createGallery","images","image","showLoadMore","hideLoadMore","showLoader","hideLoader","clearGallery","lightBox","SimpleLightbox","form","inputField","currentPage","totalHits","loadedHits","myPicture","handleSubmit","handleClick","event","iziToast","response","markup","resolve","cardHeight"],"mappings":"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"}