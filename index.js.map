{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page) {\n\n    const API_KEY = \"50815044-d1b29e7254804b3149c32accf\";\n    const BASE_URL = \"https://pixabay.com/api/\";\n    const PER_PAGE = 15;\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page:PER_PAGE,\n    });\n    const response =  await axios(`${BASE_URL}?${params}`)\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMore = document.querySelector(\".load-more\");\n\nconst lightBox = new SimpleLightbox(\".image-item\", {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images.map(image =>\n        ` <li class=\"gallery-item\">\n        <a class=\"image-item\" href = \"${image.largeImageURL}\">\n        <img src = \"${image.webformatURL}\" alt = \"${image.tags}\" />\n        <ul class =\"description\">\n        <li>\n        <p><b>Likes</b> ${image.likes}</p>\n        </li>\n        <li> \n        <p> <b>Views</b> ${image.views}</p>\n        </li>\n        <li>\n         <p> <b>Comments</b> ${image.comments}</p>\n        </li>\n        <li>\n         <p> <b>Downloads</b> ${image.downloads}</p>\n        </li>\n        </ul>\n        </a>\n    </li>\n`).join('');\n \n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightBox.refresh();\n};\n\nexport function showLoadMoreButton() {\n    loadMore.classList.remove(\"hidden\");\n    loadMore.disabled = false;\n    loadMore.textContent = \"Load more\";\n}\nexport function hideLoadMoreButton() {\n loadMore.classList.add(\"hidden\")   \n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n    createGallery,\n    clearGallery,\n    hideLoader,\n    showLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from './js/render-functions';\n\n\n\nconst form = document.querySelector(\".form\");\nconst inputField = document.querySelector(\".input-field\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMore = document.querySelector(\".load-more\");\n\nlet currentPage = 1;\nlet totalHits = 0;\nlet loadedHits = 0;\nlet myPicture = '';\n\nform.addEventListener(\"submit\", handleSubmit)\nloadMore.addEventListener(\"click\", handleClick)\n\n\n\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    clearGallery();\n    hideLoadMoreButton();\n   \n    myPicture = inputField.value.trim();\n    currentPage = 1;\n    loadedHits = 0;\n    if (myPicture === '') {\n        iziToast.warning({\n      message: 'Please enter a search query.',\n      position: 'topRight',\n        });\n       \n    return;\n    }\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        const response = await getImagesByQuery(myPicture, currentPage);\n        totalHits = response.totalHits;\n        \n        if (response.hits.length === 0) {\n            return iziToast.info({\n                title: 'Error',\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        }\n        createGallery(response.hits);  \n        loadedHits += response.hits.length;\n\n        if (loadedHits < totalHits) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n    } catch (error) {\n            iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n            console.log(error)\n    } finally {\n        hideLoader();\n        inputField.value = '';\n    }\n};\n\n\n\nasync function handleClick(event) {\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        currentPage += 1;\n        const response = await getImagesByQuery(myPicture, currentPage);\n        createGallery(response.hits);\n       \n        loadedHits += response.hits.length;\n        if (loadedHits >= totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            showLoadMoreButton();\n        }\n        const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    } catch (error) {\n            iziToast.error({\n      message: 'Failed to load more images.',\n      position: 'topRight',\n    });\n        console.log(error);\n    } finally {\n        hideLoader();\n        \n        }\n};\n"],"names":["getImagesByQuery","query","page","API_KEY","BASE_URL","params","axios","loader","gallery","loadMore","lightBox","SimpleLightbox","createGallery","images","markup","image","showLoadMoreButton","hideLoadMoreButton","showLoader","hideLoader","clearGallery","form","inputField","currentPage","totalHits","loadedHits","myPicture","handleSubmit","handleClick","event","iziToast","response","error","cardHeight"],"mappings":"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"}